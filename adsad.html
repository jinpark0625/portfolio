<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      body {
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      canvas {
        background-color: #080808;
      }

      span {
        position: absolute;
        color: white;
        font: 15vmin Dense;
        padding: 10px 23px;
        border-radius: 10px;
        background-color: rgba(0, 0, 0, 0.2);
      }
      .noise {
        z-index: 1;
      }

      .noise:after {
        content: "";
        position: absolute;
        z-index: -1;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABIFJREFUeNrEWk1rGzEQXWuX0prQECcQYjAUFvbqs3NMfnz+QyDXQiBpaA+hPRhXMpIrT97MPKXQGhRJu/pYab7ezCR0XTfFMu52u67Uso2eyffyXS7zUpy1Fi37yu9NdYh/tqk1m83GUst26aP3pY4LPtTjUj/Xr6nIder58f232F7I57Itf2WP0ums27AooFBBXUPeYtVe5DIiqmscc7QGsQk8gEdu60OsD9P6HqsNFukACzxIFkLklqxRsdmDfK6tZY0F8/qOEeh86ncpBUtANXZkuaD+tllulN9LOnA+9YsmbPJ20Lj6eRmPFAKaV1MRUVb292uIU5/l9hkrtJ5MaVRA81hKozlB3MaLvBlNBSP50W5ZzOkR5czbBnIi5WWQgxHroPdoPCnMW+WA1iVM8d09EvoyZtD42vpAjRKIly3+1+aAfbcOlf/Ykc1ms8x8t9JkwtIyjC1h+b5x3aRNp4OM3N3dfapPe3t7e2ppLUQVC+oUG6TxvaatCHu13Rfl5CtPk7BwhrEpFvRpmMcZtKp9zn50CxtphxDrn5UC5vE3lNvn5UCsTHgHYICrZ+c6dtP4+5zrj7Gc5vbSA4kWSs7lKj+/sgQbUOboICHpaM0wKbr+Zyzfc/sro16lahXteV5/7sGd5+fnkN8tkCmgoHuhSqFMTRHvFhlgKN5N3lpyz8GD4B5I1CwtMnCmQTMQBeIUqfIHyxojy2v5Ih4CljbFWLeGMX0NTxT27wNaqPU25AfWxk+TO+25IqOTBuVLO8gbQrcshUpujCy2FzBg9spj95a7nodYubNwFfLEEiZjBbcea6lgw8eZNNUux82KeWc8MVYONLnQ5mqs7cjRkQgEJn6E5ODm5uY1CZkXB5P2RMqPxqZWfAvKLAshvBAQG/ph3NtGZHAc1/JCoP8RKI7MmJDJNrf8AOm/a2TXQqKIHbwoDFLp6dn19fVS04QjCjJ70T4POnhxMgcKja1RSai1LPCoxagYO+FpJU97WXZpYDZiLHyttTQoAVhvqrMB1fheBhyYgB9kh6enpwC1A6kEPEPGuMG1QfTYc5YbEN16lPHCqchHsVC0pyjMb9mfxrCYbDxX28zSVkZ0XVr9y9h/THXsniAEERi44IHKFtVqwXkUuMv9x7rWZG782+wU4m3P8jNF7HlpqfmAgtUSMkuojqC7YIt7Vp03tE+kRnwTMm1JtVlazDNujS7D2OIyBAbtahESLdvLQBwme5vCuEg20b4H9fuv/AZrfS0LYM19k0Ns/WcBFp6zGeDGtPgkFUpgsrmpXq/XvzS1ivIbKPiA1KyFnFFkv4qybOu1BtZlVUlahW8AS6zys1XsfrCsuZX08VLXB1dXE1SN56ubvc+qtrdQQXSLf2hC68mBlsc0XV0mD86ESKdpWuX+qhTWO2RVOtjf99M9J6fV1fWUxXuSSoFJcWkyY+EsLTuLWNBLuKJnUs6CyBteXVxcfDHy2n0JASH5QTZF8PwWpRs8h83735RDEFsTbMZAeinp6gK6ojKJ8Z2kuob5yrzfAgwASaYfY2UgQSYAAAAASUVORK5CYII=);
        /* background-image: url(1.png); */

        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
        filter: alpha(opacity=60);
        opacity: 0.6;
      }
    </style>
  </head>
  <body>
    <canvas></canvas>
    <div class="noise"></div>

    <script>
      // globals
      var STAR_COUNT = 7;
      var MIN_STAR_SIZE = 5;
      var STAR_SIZE_RANGE = 25;
      var MAX_VELOCITY = 2;
      var MOUSE_DISTANCE = 50;
      var RING_GROW_SPEED = 1;
      var linkStar = null;

      // set up canvas
      var canvas = document.querySelector("canvas");
      canvas.width = innerWidth;
      canvas.height = innerHeight;
      var c = canvas.getContext("2d");

      window.addEventListener("resize", function (e) {
        canvas.width = innerWidth;
        canvas.height = innerHeight;
        init();
      });

      // track mouse
      var mouse = {
        x: undefined,
        y: undefined,
      };

      window.addEventListener("mousemove", function (e) {
        mouse.x = e.x;
        mouse.y = e.y;
      });

      // track clicks
      var click = {
        x: undefined,
        y: undefined,
      };

      window.addEventListener("mousedown", function (e) {
        click.x = e.x;
        click.y = e.y;
      });

      // set up stars
      var starArray = [];

      function init() {
        starArray = [];
        linksArray = [];

        for (var i = 0; i < STAR_COUNT; i++) {
          var radius = Math.random() * STAR_SIZE_RANGE + MIN_STAR_SIZE;
          var x = Math.random() * (innerWidth - radius * 2) + radius;
          var y = Math.random() * (innerHeight - radius * 2) + radius;
          var dx = (Math.random() - 0.5) * MAX_VELOCITY;
          var dy = (Math.random() - 0.5) * MAX_VELOCITY;
          var ring = new Ring(x, y, radius);

          starArray.push(new Star(radius, x, y, dx, dy, ring));
        }

        animate();
      }

      // ring class
      function Ring(x, y, radius) {
        this.x = x;
        this.y = y;
        this.radius = radius;
        this.initialRad = radius;
        this.radiusTarget = radius + radius / 2;
        this.counted = false;

        this.draw = function () {
          c.beginPath();
          c.lineWidth = 1;
          c.shadowBlur = 0;
          c.arc(this.x, this.y, this.radius, Math.PI * 2, false);
          c.strokeStyle = "#D4D4D4";
          c.stroke();
        };

        this.update = function (newX, newY) {
          this.x = newX;
          this.y = newY;
          this.draw();
        };

        this.expand = function () {
          this.radius += RING_GROW_SPEED;
        };

        this.shrink = function () {
          this.radius -= RING_GROW_SPEED;
        };
      }

      // star class
      function Star(radius, x, y, dx, dy, ring) {
        this.x = x;
        this.y = y;
        this.dx = dx;
        this.dy = dy;
        this.radius = radius;
        this.minRadius = radius;
        this.ring = ring;
        this.color = "#D4D4D4";

        this.ring.draw();

        this.draw = function () {
          c.beginPath();
          c.arc(this.x, this.y, this.radius, Math.PI * 2, false);
          c.fillStyle = this.color;
          c.shadowColor = this.color;
          c.shadowBlur = 10;
          c.fill();
        };

        this.update = function () {
          if (this.x + this.radius >= innerWidth || this.x - this.radius <= 0) {
            this.dx = -this.dx;
          }

          if (
            this.y + this.radius >= innerHeight ||
            this.y - this.radius <= 0
          ) {
            this.dy = -this.dy;
          }

          this.x += this.dx;
          this.y += this.dy;

          // mouse interactivity
          if (
            mouse.x - this.x < MOUSE_DISTANCE &&
            mouse.x - this.x > -MOUSE_DISTANCE &&
            mouse.y - this.y < MOUSE_DISTANCE &&
            mouse.y - this.y > -MOUSE_DISTANCE &&
            this.ring.radius < this.ring.radiusTarget
          ) {
            this.ring.expand();
          } else if (this.ring.radius > this.ring.initialRad) {
            this.ring.shrink();
          }

          // mouse click
          if (
            click.x < this.x + radius &&
            click.x > this.x - radius &&
            click.y < this.y + radius &&
            click.y > this.y - radius
          ) {
            if (linkStar) {
              createLink(this);
            } else {
              linkStar = this;
            }

            click.x = undefined;
            click.y = undefined;
          }

          this.draw();
          this.ring.update(this.x, this.y);
        };
      }

      function renderActiveLink() {
        c.beginPath();
        c.lineWidth = 5;
        c.shadowBlur = 0;
        c.moveTo(linkStar.x, linkStar.y);
        c.lineTo(mouse.x, mouse.y);
        c.strokeStyle = "#D4D4D4";
        c.stroke();
      }

      var linksArray = [];

      function createLink(target) {
        linksArray.push(new Link(linkStar, target));
        linkStar = null;
      }

      function Link(start, end) {
        this.start = start;
        this.end = end;

        this.draw = function () {
          c.beginPath();
          c.lineWidth = 5;
          c.shadowBlur = 10;
          c.moveTo(this.start.x, this.start.y);
          c.lineTo(this.end.x, this.end.y);
          c.strokeStyle = "#D4D4D4";
          c.stroke();
        };
      }

      // animate stars
      function animate() {
        requestAnimationFrame(animate);
        c.clearRect(0, 0, innerWidth, innerHeight);

        for (var i = 0; i < starArray.length; i++) {
          starArray[i].update();
        }

        for (var i = 0; i < linksArray.length; i++) {
          linksArray[i].draw();
        }

        if (linkStar) {
          renderActiveLink();
        }
      }

      // initialise on load
      init();
    </script>
  </body>
</html>
